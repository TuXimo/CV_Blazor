@using CV_Blazor.Models
@using CV_Blazor.Components
@using System.Collections.Generic
@using CV_Blazor.Services

@inject IStringLocalizer<Resources> Localizer
@implements IDisposable


@code {
    [Parameter] public PortfolioViewModel Portfolio { get; set; } = new();

    private string activeTab = "Projects";

    private void SetTab(string tab)
    {
        activeTab = tab;
    }

    public void Dispose()
    {
    }
}



<section id="projects" class="container py-5">
    <h2 class="text-center mb-4 section-title">@Localizer["ps_myProjects"]</h2>

    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class='nav-link @(activeTab == "Projects" ? "active" : "")'
               href=""
               @onclick="@(() => SetTab("Projects"))"
               @onclick:preventDefault>

                @Localizer["nav_Projects"]
            </a>
        </li>
        <li class="nav-item">
            <a class='nav-link @(activeTab == "Jams" ? "active" : "")'
               href=""
               @onclick="@(() => SetTab("Jams"))"
               @onclick:preventDefault>

                Jams
            </a>
        </li>
    </ul>

    @if (activeTab == "Projects")
    {
        <!-- Mobile: horizontal scroll list -->
        <div class="projects-scroll d-md-none">
            @foreach (var project in Portfolio.Projects)
            {
                <ProjectCard Project="project" IsProject="true" />
            }
        </div>

        <!-- Desktop: original grid -->
        <div class="row d-none d-md-flex">
            @foreach (var project in Portfolio.Projects)
            {
                <div class="col-md-6 col-lg-4 mb-4">
                    <ProjectCard Project="project" IsProject="true" />
                </div>
            }
        </div>
    }
    else if (activeTab == "Jams")
    {
        <!-- Mobile: horizontal scroll list for jams -->
        <div class="projects-scroll d-md-none">
            @foreach (var jam in Portfolio.Jams)
            {
                <ProjectCard Project="jam" IsProject="false" />
            }
        </div>

        <!-- Desktop: original grid for jams -->
        <div class="row d-none d-md-flex">
            @foreach (var jam in Portfolio.Jams)
            {
                <div class="col-md-6 col-lg-4 mb-4">
                    <ProjectCard Project="jam" IsProject="false" />
                </div>
            }
        </div>
    }
</section>